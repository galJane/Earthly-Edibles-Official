<%- include('layouts/header.ejs') %>
<%- include('layouts/navigation.ejs') %>
<br>
<h1>Checkout Information</h1>

<!--container-->

<div class="container-fluid">
  
    <!--row-->
    <div class="row">
 
      <!--col-->
      <div class="col-lg-4 ">
       
        <!--payment card-->
        <form action="/submitCheckout" method="POST">

          <!--card-->

        <div class="card">

        <!--Header-->
          <div class="form header">
            <h4>Card information</h4>
              <div class="form-group name">
                  <label for="infoName">Name</label>
                  <input type="text" class="form-control" id="infoName" name="infoName" required>
              </div>

              <div class="form-group" id="card-number-field">
                <label for="cardNumber">Card Number</label>
                <input type="text" class="form-control" id="infoCard" name="infoCard" required  maxlength="16">
            </div>
            
              <div class="form-group CVV">
                  <label for="cvv">CVV</label>
                  <input type="text" class="form-control" id="cvv" name="cvv" required maxlength="3">
              </div>

              <div class="input-group expiration-date">
                   <label for="">Expiration Date</label>
                  <input type="text" class="form-control" id="form-month"  name="infoMonth" required maxlength="2">
                  <span class="date-separator">/</span>
                  <input type="text" class="form-control" id="form-year" name="infoYear" required maxlength="2">
                </div>
                <br>
                <label for="card">Card Type:</label>
                  <select name="infoType" id="type">
                    <option value="Credit Card">Credit Card</option>
                    <option value="Debit Card">Debit Card</option>
                  </select>
                  <br><br>

                  <h4>Shipping Address</h4>
                  <div class="md-form">
                    <i class="fas fa-user prefix grey-text"></i>
                    <label for="form-first">First Name</label>
                    <input type="text" id="form-first" class="form-control" name="infoFirst" required>
                  </div>
      
                  <div class="md-form">
                    <label for="form-last">Last Name</label>
                    <input type="text" id="form-last" class="form-control" name="infoLast" required>
                  </div>

                  <div class="md-form">
                    <label for="form-streetAddress">Street Address</label>
                    <input type="text" id="form-streetAddress" class="form-control" name="streetAddress" required>
                  </div>

                  <div class="md-form">
                    <label for="form-city">City</label>
                    <input type="text" id="form-city" class="form-control" name="infoCity" required>
                  </div>
                  <br>
                  <label for="state">State:</label>
                  <select name="infoState" id="state">
                    <option value="AL">Alabama</option>
                    <option value="AK">Alaska</option>
                    <option value="AZ">Arizona</option>
                    <option value="AR">Arkansas</option>
                    <option value="CA">California</option>
                    <option value="CO">Colorado</option>
                    <option value="CT">Connecticut</option>
                    <option value="DE">Delaware</option>
                    <option value="DC">District Of Columbia</option>
                    <option value="FL">Florida</option>
                    <option value="GA">Georgia</option>
                    <option value="HI">Hawaii</option>
                    <option value="ID">Idaho</option>
                    <option value="IL">Illinois</option>
                    <option value="IN">Indiana</option>
                    <option value="IA">Iowa</option>
                    <option value="KS">Kansas</option>
                    <option value="KY">Kentucky</option>
                    <option value="LA">Louisiana</option>
                    <option value="ME">Maine</option>
                    <option value="MD">Maryland</option>
                    <option value="MA">Massachusetts</option>
                    <option value="MI">Michigan</option>
                    <option value="MN">Minnesota</option>
                    <option value="MS">Mississippi</option>
                    <option value="MO">Missouri</option>
                    <option value="MT">Montana</option>
                    <option value="NE">Nebraska</option>
                    <option value="NV">Nevada</option>
                    <option value="NH">New Hampshire</option>
                    <option value="NJ">New Jersey</option>
                    <option value="NM">New Mexico</option>
                    <option value="NY">New York</option>
                    <option value="NC">North Carolina</option>
                    <option value="ND">North Dakota</option>
                    <option value="OH">Ohio</option>
                    <option value="OK">Oklahoma</option>
                    <option value="OR">Oregon</option>
                    <option value="PA">Pennsylvania</option>
                    <option value="RI">Rhode Island</option>
                    <option value="SC">South Carolina</option>
                    <option value="SD">South Dakota</option>
                    <option value="TN">Tennessee</option>
                    <option value="TX">Texas</option>
                    <option value="UT">Utah</option>
                    <option value="VT">Vermont</option>
                    <option value="VA">Virginia</option>
                    <option value="WA">Washington</option>
                    <option value="WV">West Virginia</option>
                    <option value="WI">Wisconsin</option>
                    <option value="WY">Wyoming</option>
                  </select>

                  <div class="md-form">
                    <label for="form-zip">Zip Code:</label>
                    <input type="text" id="form-zip" class="form-control" name="infoZip" required maxlength="5">
                  </div>

                  <div class="md-form">
                    <label for="form-phone">Phone Number:</label>
                    <input type="text" id="form-phone" class="form-control" name="infoPhone" required maxlength="10">
                  </div>
                  
                  <div class="text-center mt-4">
                    <button class="btn btn-info">Submit</button>
                  </div>
        
        <!--end payment card-->

        </div>
        <!--end header-->
      </div>
      <!--end card-->
      </form>

    
   </div>
  <!-- end col-->


  <!--col-lg start-->
  <div class="col">
    <!--row-->
    <div class="row">
      
    
      <!--col-->
      <div class="col-md-5">
        <h4>Cart Details</h4>
      <div class="row">



        <table class="table">
          <thead>
            <tr>
              <th scope="col">Image</th>
              <th scope="col">Item</th>
              <th scope="col">Quantity</th>
              <th scope="col">Unit Price</th>
              <th scope="col">Total</th>
            </tr>
          </thead>
          <tbody>

            <% let totalPrice = 0;
                         for (let z of list) {   %>
            <tr>
              <% if (status == 0) { %>
              <th scope="row" width="70"><a href="./images/<%= z.img %>"><img class="card-img-top"
                    src="./images/<%= z.img %>"></a></th>
              <% } %>

              <% if (status == 1) { %>
                <th scope="row" width="70"><a href="../images/<%= z.img %>"><img class="card-img-top"
                      src="../images/<%= z.img %>"></a></th>
                <% } %>

              <td><%= z.title %></td>
              <td><a href="/decrease/<%=z.id%>" class="btn btn-info"> - </a>&nbsp;<%= z.quantity %>&nbsp;<a href="/increase/<%=z.id%>" class="btn btn-info"> + </a></td>
              <td>$<%= z.price.toFixed(2) %></td>
              <td>$<%= (z.quantity * z.price).toFixed(2) %></td>

              <form action="/<%=z.id%>?_method=Delete" method="POST">
                <td><button type="submit" class="btn btn-info">Delete</button></td>
              </form>

              <% totalPrice = totalPrice + (z.quantity * z.price); %>
            </tr>
            <% } %>
            <tr>
              <th scope="col"> </th>
              <th scope="col"> </th>
              <th scope="col"> </th>
              <th scope="col">Total Price</th>
              <th scope="col">$<%= totalPrice.toFixed(2) %></th>
              <th scope="col"> </th>
            </tr>
            <% salesTax = totalPrice * (0.0625); %>

            <tr>
              <th scope="col"> </th>
              <th scope="col"> </th>
              <th scope="col"> </th>
              <th scope="col">Sales Tax</th>
              <th scope="col">$<%= salesTax.toFixed(2) %></th>
              <th scope="col"> </th>
            </tr>

            <% grandTotal = (totalPrice + salesTax); %>

            <tr>
              <th scope="col"> </th>
              <th scope="col"> </th>
              <th scope="col"> </th>
              <th scope="col">Grand Total</th>
              <th scope="col">$<%= grandTotal.toFixed(2) %></th>
              <th scope="col"> 
            
                
                
          </th>
            </tr>

            


          </tbody>
        </table>



      </div>
      <!-- /.row -->

    </div>
    <!--col-md end-->  
  
  </div>
  <!--row end-->
 
</div>
<!--col-sm end-->

</div>

</div>
<!--end container-->

<%- include('layouts/footer.ejs') %> 

<style>

.col-md-3 {
  padding-left: 50px;
}

.col-lg-4 {
  padding-left: 50px;
}



</style>